<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sentiment Analyzer</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="card">
    <h1>Sentiment Analyzer</h1>
    <p class="sub">Write a sentence and click Analyze. You’ll get label + scores.</p>

    <form method="POST" action="/">
      <textarea name="text" placeholder="Write something..." required>{{ text or "" }}</textarea>

      <button type="submit" id="analyzeBtn">
        <span id="btnText">Analyze</span>
        <span id="loader" class="loader" style="display:none;"></span>
      </button>
    </form>

    {% if result %}
      <div class="result">
        <div class="badge {{ result.label|lower }}">
          {% if result.label|lower == "positive" %}✅{% elif result.label|lower == "negative" %}❌{% else %}⚠️{% endif %}
          <span>Sentiment: {{ result.label }}</span>
        </div>

        <div class="scores">
          <div>Positive: <b>{{ result.pos_pct }}%</b></div>
          <div>Neutral: <b>{{ result.neu_pct }}%</b></div>
          <div>Negative: <b>{{ result.neg_pct }}%</b></div>
          <div class="small">Compound: <b>{{ result.compound }}</b></div>
        </div>

        <div class="bar">
          <div class="bar-fill {{ result.label|lower }}" style="width: {{ result.compound_pct }}%;"></div>
        </div>
        <div class="small">Overall score: {{ result.compound_pct }}%</div>

        <small class="hint">Tip: Try “I love this product” vs “This product is bad”.</small>
      </div>
    {% endif %}
  </div>

<script>
const form = document.querySelector("form");
const button = document.getElementById("analyzeBtn");
const btnText = document.getElementById("btnText");
const loader = document.getElementById("loader");

form.addEventListener("submit", function() {
  button.disabled = true;
  btnText.textContent = "Analyzing...";
  loader.style.display = "inline-block";
});
</script>
</body>
</html>